<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Max Alletsee" />

<meta name="date" content="2019-04-28" />

<title>Using Weighted Survey Data</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using Weighted Survey Data</h1>
<h4 class="author">Max Alletsee</h4>
<h4 class="date">2019-04-28</h4>



<p>Like all survey-based analyses, the Price Sensitivity Meter analysis is usually based on data from a sample and not from the full target population. If the analysis should be helpful for making statements about the range of acceptable prices in the target population, it is necessary that the sample is a good representation of this target population. In an ideal world, we have a scenario where each member of the target population has the same likelihood of being included in the sample. In practice, this is often not the case - as participation in surveys is often voluntary and some people might refuse, selection of a surveying technique (for instance online interviewing excludes all members of the population that do not have internet access or use it very rarely) etc. A sample is hardly ever perfect, in particular when it comes to market research where cost and timing constraints come into play.</p>
<p>Weighting the survey data is one potential solution to dealing with the shortcomings from an imbalanced sample. This imbalance is sometimes a deliberate choice (for instance when using cluster sampling) and sometimes the result of systematic problems of the fieldwork. It is important to note that weighting is often a rather pragmatic solution to a problem, but not necessarily the best solution from a methodological standpoint. It can certainly help, but it is not the miracle cure that finds reliable insights in a crappy sample.</p>
<p>The <em>pricesensitivitymeter</em> package includes a function that allows to use <em>weighted</em> survey data. This vignette explains the use of this function. For a general overview of the main function for unweighted data, please read the help of th <em>psm_analysis()</em> function. The function that uses weighted data uses the <em>survey</em> package to calculate the weights; please read its documentation if you need to find out how to specify your sample design. The author of the <em>survey</em> package has also published a very helpful book<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> that offers guidance on weighting in general and the R package in particular.</p>
<p>This vignette will show a simple workflow with simulated (random) data.</p>
<div id="using-weighting-to-correct-for-a-biased-sample" class="section level2">
<h2>Using Weighting to Correct for a Biased Sample</h2>
<p>The following paragraphs will show the benefits of weighting in case of a biased sample. Let’s consider the following example:</p>
<ol style="list-style-type: decimal">
<li>We have a sample in which two thirds of the respondents are men and one third of the respondents are women</li>
<li>We know that we have a gender balance of 50%/50% in our target population (in other words: women are underrepresented in our sample)</li>
<li>Women are on average willing to pay +50% of the price compared to men</li>
</ol>
<p>This is of course an extreme example because the same variable (gender) is directly linked to <em>both</em> the likelihood to be included in the sample <em>and</em> the price preference.</p>
<p>The R code below creates this example data set with the gender bias and creates the survey design object with the <em>survey</em> package (assuming simple random sampling and a population of 10k people).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">set.seed</span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(survey)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; Loading required package: grid</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; Loading required package: Matrix</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; Loading required package: survival</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; Attaching package: &#39;survey&#39;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; The following object is masked from &#39;package:graphics&#39;:</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;     dotchart</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co"># Creating dataset with price acceptance and biased gender variable</span></a>
<a class="sourceLine" id="cb1-13" title="13">input_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">tch =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">8</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb1-14" title="14">                         <span class="dt">ch =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">12</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb1-15" title="15">                         <span class="dt">ex =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">13</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb1-16" title="16">                         <span class="dt">tex =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">15</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb1-17" title="17">                         <span class="dt">gender =</span> <span class="kw">sample</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>),</a>
<a class="sourceLine" id="cb1-18" title="18">                                         <span class="dt">size =</span> <span class="dv">250</span>,</a>
<a class="sourceLine" id="cb1-19" title="19">                                         <span class="dt">replace =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb1-20" title="20">                                         <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">2</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb1-21" title="21"></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co"># for women: increasing the price acceptance by +50%</span></a>
<a class="sourceLine" id="cb1-23" title="23">input_data<span class="op">$</span>tch[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data<span class="op">$</span>tch[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb1-24" title="24">input_data<span class="op">$</span>ch[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data<span class="op">$</span>ch[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb1-25" title="25">input_data<span class="op">$</span>ex[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data<span class="op">$</span>ex[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb1-26" title="26">input_data<span class="op">$</span>tex[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data<span class="op">$</span>tex[input_data<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co"># for survey design object: occurence of each gender in the target population</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="co"># it&#39;s only one figure in this example because we assume that gender should be perfectly balanced. </span></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co"># if this is not balanced in the population, we would need a vector with the number of occurences in the population.</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co"># the sum of the strata size across all strata gives the total population size</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="co"># (here: two strata with 5k each = 10k total population) </span></a>
<a class="sourceLine" id="cb1-33" title="33">input_data<span class="op">$</span>gender_pop &lt;-<span class="st"> </span><span class="dv">5000</span></a>
<a class="sourceLine" id="cb1-34" title="34"></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="co"># creating the survey design object for post-stratification based on gender</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="co"># we assume that the selection of respondents within each gender is biased and...</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="co"># only the gender balance in the sample is problematic</span></a>
<a class="sourceLine" id="cb1-38" title="38">input_design &lt;-<span class="st"> </span>survey<span class="op">::</span><span class="kw">svydesign</span>(<span class="dt">ids =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co"># no clusters</span></a>
<a class="sourceLine" id="cb1-39" title="39">                          <span class="dt">probs =</span> <span class="ot">NULL</span>, <span class="co"># hence no cluster samling probabilities,</span></a>
<a class="sourceLine" id="cb1-40" title="40">                          <span class="dt">strata =</span> input_data<span class="op">$</span>gender, <span class="co"># stratified by gender</span></a>
<a class="sourceLine" id="cb1-41" title="41">                          <span class="dt">fpc =</span> input_data<span class="op">$</span>gender_pop, <span class="co"># strata size in the population</span></a>
<a class="sourceLine" id="cb1-42" title="42">                          <span class="dt">data =</span> input_data) <span class="co"># data object used as input</span></a></code></pre></div>
<p>After those preparations, we can run the weighted Price Sensitivity Meter Analysis using the <em>psm_analysis_weighted()</em> function. Its basic inputs are the names of the variables with the price information (“too cheap”, “cheap”, “expensive” and “too expensive”) and the survey design object that we have just created using the <em>svydesign()</em> function of the <em>survey</em> package. To emphasize the difference to unweighted data, the input for this survey design object is called “design” instead of “data”. Please note that the <em>psm_analysis_weighted()</em> function requires a “design” input and cannot cope with just four vectors that contain the price information.</p>
<p>The resulting object and the <em>summary()</em> function use the same template as the function for the unweighted PSM analysis.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(pricesensitivitymeter)</a>
<a class="sourceLine" id="cb2-2" title="2">output_weighted_psm &lt;-<span class="st"> </span><span class="kw">psm_analysis_weighted</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb2-3" title="3">                                             <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb2-4" title="4">                                             <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb2-5" title="5">                                             <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb2-6" title="6">                                             <span class="dt">design =</span> input_design)</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">summary</span>(output_weighted_psm)</a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt; Accepted Price Range: 11.94 - 16.34 </span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; Indifference Price Point: 14.36 </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt; Optimal Price Point: 13.77 </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; 226 cases with individual price preferences were analyzed (weighted data).</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; Total data set consists of 250 cases. Analysis was limited to cases with transitive price preferences.</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt; (Removed: n = 24 / 10% of data)</span></a></code></pre></div>
</div>
<div id="identical-results-when-weights-are-identical" class="section level2">
<h2>Identical Results When Weights Are Identical</h2>
<p>If the sample is a perfect representation of the target population, the results of the Price Sensitivity Meter analysis will be the same regardless if the <em>psm_analysis()</em> function or the <em>psm_analysis_weighted()</em> function is used - under the condition that there are no respondents with intransitive price preferences.</p>
<p>The code below demonstrates first what happens if there are indeed only respondents with transitive preferences. I will discuss the special case of respondents with intransitive price preferences afterwards.</p>
<p>Note that in this example women <em>still</em> have a higher price acceptance than men. The main difference to the example above is the fact that the gender balance in the sample is a perfect representation of the target population (as the data is simulated, I model the target population after the sample - which is obviously impossible in real life). It is important to keep this distinction in mind: Weighting <em>can</em> correct for differences of the likelihood to be included in the sample, but it <em>cannot</em> be used to understand if different strata/groups have a different price acceptance. In this example below, the price acceptance differs quite a lot across genders, but we would need sub-group analyses to understand this.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">set.seed</span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">library</span>(survey)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># Creating dataset with price acceptance and unbiased gender variable</span></a>
<a class="sourceLine" id="cb3-5" title="5">input_data_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">tch =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">4</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb3-6" title="6">                         <span class="dt">ch =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">8</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb3-7" title="7">                         <span class="dt">ex =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">12</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb3-8" title="8">                         <span class="dt">tex =</span> <span class="kw">round</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">250</span>, <span class="dt">mean =</span> <span class="dv">16</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>), <span class="dt">digits =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb3-9" title="9">                         <span class="dt">gender =</span> <span class="kw">sample</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>),</a>
<a class="sourceLine" id="cb3-10" title="10">                                         <span class="dt">size =</span> <span class="dv">250</span>,</a>
<a class="sourceLine" id="cb3-11" title="11">                                         <span class="dt">replace =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-12" title="12">                                         <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)))</a>
<a class="sourceLine" id="cb3-13" title="13"></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co"># for women: increasing the price acceptance by +50%</span></a>
<a class="sourceLine" id="cb3-15" title="15">input_data_<span class="dv">2</span><span class="op">$</span>tch[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data_<span class="dv">2</span><span class="op">$</span>tch[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb3-16" title="16">input_data_<span class="dv">2</span><span class="op">$</span>ch[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data_<span class="dv">2</span><span class="op">$</span>ch[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb3-17" title="17">input_data_<span class="dv">2</span><span class="op">$</span>ex[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data_<span class="dv">2</span><span class="op">$</span>ex[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb3-18" title="18">input_data_<span class="dv">2</span><span class="op">$</span>tex[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span>input_data_<span class="dv">2</span><span class="op">$</span>tex[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] <span class="op">*</span><span class="st"> </span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb3-19" title="19"></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co"># now let&#39;s create a sample design object (using the survey package)</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co"># ... assuming that gender is balanced equally in the population of 10000</span></a>
<a class="sourceLine" id="cb3-22" title="22"></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co"># for survey design object: occurence of each gender in the target population</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co"># would usually be information from sampling frame, differs here only for demonstration purposes</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co"># here: scaling up based on actual sample information (hypothetical population of 250 * 4 = 10k)</span></a>
<a class="sourceLine" id="cb3-26" title="26">input_data_<span class="dv">2</span><span class="op">$</span>gender_pop &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb3-27" title="27">input_data_<span class="dv">2</span><span class="op">$</span>gender_pop[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> </span><span class="kw">sum</span>(input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">40</span></a>
<a class="sourceLine" id="cb3-28" title="28">input_data_<span class="dv">2</span><span class="op">$</span>gender_pop[input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>] &lt;-<span class="st"> </span><span class="kw">sum</span>(input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">40</span></a>
<a class="sourceLine" id="cb3-29" title="29"></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co"># creating the survey design object for post-stratification based on gender</span></a>
<a class="sourceLine" id="cb3-31" title="31">input_design_<span class="dv">2</span> &lt;-<span class="st"> </span>survey<span class="op">::</span><span class="kw">svydesign</span>(<span class="dt">ids =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co"># no clusters</span></a>
<a class="sourceLine" id="cb3-32" title="32">                                  <span class="dt">probs =</span> <span class="ot">NULL</span>, <span class="co"># hence no cluster sampling probabilities,</span></a>
<a class="sourceLine" id="cb3-33" title="33">                                  <span class="dt">strata =</span> input_data_<span class="dv">2</span><span class="op">$</span>gender, <span class="co"># stratified by gender</span></a>
<a class="sourceLine" id="cb3-34" title="34">                                  <span class="dt">fpc =</span> input_data_<span class="dv">2</span><span class="op">$</span>gender_pop, <span class="co"># strata size in the population</span></a>
<a class="sourceLine" id="cb3-35" title="35">                                  <span class="dt">data =</span> input_data_<span class="dv">2</span>) <span class="co"># data object used as input</span></a>
<a class="sourceLine" id="cb3-36" title="36"></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co"># quick check: there is only one weight for all our strata</span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co"># if we would have different weights per gender, we would see two unique values here</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="kw">unique</span>(<span class="kw">weights</span>(input_design_<span class="dv">2</span>, <span class="dt">type =</span> <span class="st">&quot;analysis&quot;</span>))</a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt; [1] 40</span></a>
<a class="sourceLine" id="cb3-41" title="41"></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co"># Loading pricesensitivitymeter package and running both weighted and unweighted analysis on the same data </span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="kw">library</span>(pricesensitivitymeter)</a>
<a class="sourceLine" id="cb3-44" title="44"></a>
<a class="sourceLine" id="cb3-45" title="45">check_weighted_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis_weighted</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb3-46" title="46">                                          <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb3-47" title="47">                                          <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb3-48" title="48">                                          <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb3-49" title="49">                                          <span class="dt">design =</span> input_design_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-50" title="50"></a>
<a class="sourceLine" id="cb3-51" title="51">check_unweighted_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb3-52" title="52">                                   <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb3-53" title="53">                                   <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb3-54" title="54">                                   <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb3-55" title="55">                                   <span class="dt">data =</span> input_data_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-56" title="56"></a>
<a class="sourceLine" id="cb3-57" title="57"><span class="co"># results should be identical</span></a>
<a class="sourceLine" id="cb3-58" title="58"><span class="kw">summary</span>(check_weighted_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-59" title="59"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb3-60" title="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-61" title="61"><span class="co">#&gt; Accepted Price Range: 7.17 - 16.82 </span></a>
<a class="sourceLine" id="cb3-62" title="62"><span class="co">#&gt; Indifference Price Point: 12.06 </span></a>
<a class="sourceLine" id="cb3-63" title="63"><span class="co">#&gt; Optimal Price Point: 8 </span></a>
<a class="sourceLine" id="cb3-64" title="64"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-65" title="65"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb3-66" title="66"><span class="co">#&gt; 250 cases with individual price preferences were analyzed (weighted data).</span></a>
<a class="sourceLine" id="cb3-67" title="67"><span class="kw">summary</span>(check_unweighted_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-68" title="68"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb3-69" title="69"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-70" title="70"><span class="co">#&gt; Accepted Price Range: 7.17 - 16.82 </span></a>
<a class="sourceLine" id="cb3-71" title="71"><span class="co">#&gt; Indifference Price Point: 12.06 </span></a>
<a class="sourceLine" id="cb3-72" title="72"><span class="co">#&gt; Optimal Price Point: 7.995 </span></a>
<a class="sourceLine" id="cb3-73" title="73"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-74" title="74"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb3-75" title="75"><span class="co">#&gt; 250 cases with individual price preferences were analyzed (unweighted data).</span></a></code></pre></div>
<p>As this example has shown, the results are identical when the weights are identical (meaning that our sample is a perfect representation of the target population) and the information on price acceptance is transitive for all respondents. Let’s now consider an example where we have intransitive price information for some respondents. For a few selected men in the sample, I manipulate the values so that the “cheap” price is larger than the “expensive” price.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">input_data_<span class="dv">3</span> &lt;-<span class="st"> </span>input_data_<span class="dv">2</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">manipulated_men &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">which</span>(input_data_<span class="dv">2</span><span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>), <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-4" title="4">input_data_<span class="dv">3</span><span class="op">$</span>ch[manipulated_men] &lt;-<span class="st"> </span>input_data_<span class="dv">3</span><span class="op">$</span>tex[manipulated_men]</a></code></pre></div>
<p>The survey design object is now re-created and used as an input for the weighted Price Sensitivity Meter analysis. When we compare the results again to an unweighted analysis, we see a slight difference. This is the case because the weighting occurs <strong>after</strong> removing cases with intransitive preferences (at the same time when the weighted empirical cumulative density functions are calculated). At this stage in our example, we still have all women from our original sample, but have removed a few men with intransitive preferences. Therefore, all remaining men have a slightly higher weight in our sample. This affects the results of our analysis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># creating the survey design object for post-stratification based on gender</span></a>
<a class="sourceLine" id="cb5-2" title="2">input_design_<span class="dv">3</span> &lt;-<span class="st"> </span>survey<span class="op">::</span><span class="kw">svydesign</span>(<span class="dt">ids =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co"># no clusters</span></a>
<a class="sourceLine" id="cb5-3" title="3">                                  <span class="dt">probs =</span> <span class="ot">NULL</span>, <span class="co"># hence no cluster sampling probabilities,</span></a>
<a class="sourceLine" id="cb5-4" title="4">                                  <span class="dt">strata =</span> input_data_<span class="dv">3</span><span class="op">$</span>gender, <span class="co"># stratified by gender</span></a>
<a class="sourceLine" id="cb5-5" title="5">                                  <span class="dt">fpc =</span> input_data_<span class="dv">3</span><span class="op">$</span>gender_pop, <span class="co"># strata size in the population</span></a>
<a class="sourceLine" id="cb5-6" title="6">                                  <span class="dt">data =</span> input_data_<span class="dv">3</span>) <span class="co"># data object used as input</span></a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co"># Loading pricesensitivitymeter package and running both weighted and unweighted analysis on the same data </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="kw">library</span>(pricesensitivitymeter)</a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11">check_weighted_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis_weighted</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb5-12" title="12">                                          <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb5-13" title="13">                                          <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb5-14" title="14">                                          <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb5-15" title="15">                                          <span class="dt">design =</span> input_design_<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-16" title="16"></a>
<a class="sourceLine" id="cb5-17" title="17">check_unweighted_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb5-18" title="18">                                   <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb5-19" title="19">                                   <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb5-20" title="20">                                   <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb5-21" title="21">                                   <span class="dt">data =</span> input_data_<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-22" title="22"></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co"># results should be different now</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="kw">summary</span>(check_weighted_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">#&gt; Accepted Price Range: 7.25 - 16.82 </span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">#&gt; Indifference Price Point: 12.11 </span></a>
<a class="sourceLine" id="cb5-29" title="29"><span class="co">#&gt; Optimal Price Point: 8 </span></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-31" title="31"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb5-32" title="32"><span class="co">#&gt; 240 cases with individual price preferences were analyzed (weighted data).</span></a>
<a class="sourceLine" id="cb5-33" title="33"><span class="co">#&gt; Total data set consists of 250 cases. Analysis was limited to cases with transitive price preferences.</span></a>
<a class="sourceLine" id="cb5-34" title="34"><span class="co">#&gt; (Removed: n = 10 / 4% of data)</span></a>
<a class="sourceLine" id="cb5-35" title="35"><span class="kw">summary</span>(check_unweighted_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb5-36" title="36"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb5-37" title="37"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-38" title="38"><span class="co">#&gt; Accepted Price Range: 7.21 - 17.09 </span></a>
<a class="sourceLine" id="cb5-39" title="39"><span class="co">#&gt; Indifference Price Point: 12.075 </span></a>
<a class="sourceLine" id="cb5-40" title="40"><span class="co">#&gt; Optimal Price Point: 7.995 </span></a>
<a class="sourceLine" id="cb5-41" title="41"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-42" title="42"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb5-43" title="43"><span class="co">#&gt; 240 cases with individual price preferences were analyzed (unweighted data).</span></a>
<a class="sourceLine" id="cb5-44" title="44"><span class="co">#&gt; Total data set consists of 250 cases. Analysis was limited to cases with transitive price preferences.</span></a>
<a class="sourceLine" id="cb5-45" title="45"><span class="co">#&gt; (Removed: n = 10 / 4% of data)</span></a></code></pre></div>
<p>The example above has been carefully chosen to show this effect. In real life examples, it only occurs when two conditions are fulfilled at the same time:</p>
<ol style="list-style-type: decimal">
<li>The respondents with intransitive preferences are not distributed proportionally across all strata (in our example: all women have transitive preferences, only men have intransitive preferences)</li>
<li>The strata which are over-/underrepresented in terms of respondents with intransitive preferences also differ in their price acceptance from the other strata</li>
</ol>
<p>If any of those conditions is not fulfilled, any difference in the price estimates due to removing cases with intransitive preferences will be very small and unsystematic.</p>
</div>
<div id="missing-too-cheap-data" class="section level2">
<h2>Missing “too cheap” Data</h2>
<p>It is also possible to run a weighted Price Sensitivity Meter analysis if there is no “too cheap” price (like for certain services like a drawing account, access to a sports match, …). The <em>psm_analysis_weighted()</em> function handles this in the same way as the <em>psm_analysis()</em> function: The “toocheap” variable should be set to NA for all cases. Having no “too cheap” price means that the lower bound of the price range and the optimal price point cannot be estimated, whereas the upper end of the price range and the indifference price point are estimated.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># setting up data with NAs in &quot;too cheap&quot; variable</span></a>
<a class="sourceLine" id="cb6-2" title="2">input_data_<span class="dv">2</span> &lt;-<span class="st"> </span>input_data</a>
<a class="sourceLine" id="cb6-3" title="3">input_data_<span class="dv">2</span><span class="op">$</span>tch &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co"># create new sample design</span></a>
<a class="sourceLine" id="cb6-6" title="6">input_design_<span class="dv">2</span> &lt;-<span class="st"> </span>survey<span class="op">::</span><span class="kw">svydesign</span>(<span class="dt">ids =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co"># no clusters</span></a>
<a class="sourceLine" id="cb6-7" title="7">                                    <span class="dt">probs =</span> <span class="ot">NULL</span>, <span class="co"># hence no cluster samling probabilities,</span></a>
<a class="sourceLine" id="cb6-8" title="8">                                    <span class="dt">strata =</span> input_data_<span class="dv">2</span><span class="op">$</span>gender, <span class="co"># stratified by gender</span></a>
<a class="sourceLine" id="cb6-9" title="9">                                    <span class="dt">fpc =</span> input_data_<span class="dv">2</span><span class="op">$</span>gender_pop, <span class="co"># strata size in the population</span></a>
<a class="sourceLine" id="cb6-10" title="10">                                    <span class="dt">data =</span> input_data_<span class="dv">2</span>) <span class="co"># data object used as input</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">library</span>(pricesensitivitymeter)</a>
<a class="sourceLine" id="cb6-13" title="13"></a>
<a class="sourceLine" id="cb6-14" title="14">test_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis_weighted</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb6-15" title="15">                                <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb6-16" title="16">                                <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb6-17" title="17">                                <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb6-18" title="18">                                <span class="dt">design =</span> input_design_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-19" title="19"><span class="kw">summary</span>(test_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">#&gt; Accepted Price Range: NA - 16.34 </span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">#&gt; Indifference Price Point: 14.36 </span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">#&gt; Optimal Price Point: NA </span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="co">#&gt; 226 cases with individual price preferences were analyzed (weighted data).</span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="co">#&gt; Total data set consists of 250 cases. Analysis was limited to cases with transitive price preferences.</span></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="co">#&gt; (Removed: n = 24 / 10% of data)</span></a></code></pre></div>
</div>
<div id="using-weighting-in-the-newton-miller-smith-extension" class="section level2">
<h2>Using Weighting in the Newton Miller Smith Extension</h2>
<p>The <em>psm_analysis_weighted()</em> function also allows to include an estimate for the price with optimal trial or optimal revenue via the Newton Miller Smith extension. This option can be used in the same way as in the unweighted <em>psm_analysis()</em> function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># setting up dataset with purchase intent information</span></a>
<a class="sourceLine" id="cb7-2" title="2">input_data_<span class="dv">3</span> &lt;-<span class="st"> </span>input_data</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4">input_data_<span class="dv">3</span><span class="op">$</span>pi_ch &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>), <span class="dt">size =</span> <span class="kw">nrow</span>(input_data_<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb7-5" title="5">                             <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>))</a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7">input_data_<span class="dv">3</span><span class="op">$</span>pi_ex &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>), <span class="dt">size =</span> <span class="kw">nrow</span>(input_data_<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb7-8" title="8">                             <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>))</a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10"></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co"># re-creating the survey design object</span></a>
<a class="sourceLine" id="cb7-12" title="12">input_design_<span class="dv">3</span> &lt;-<span class="st"> </span>survey<span class="op">::</span><span class="kw">svydesign</span>(<span class="dt">ids =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-13" title="13">                                    <span class="dt">probs =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-14" title="14">                                    <span class="dt">strata =</span> input_data_<span class="dv">3</span><span class="op">$</span>gender,</a>
<a class="sourceLine" id="cb7-15" title="15">                                    <span class="dt">fpc =</span> input_data_<span class="dv">3</span><span class="op">$</span>gender_pop,</a>
<a class="sourceLine" id="cb7-16" title="16">                                    <span class="dt">data =</span> input_data_<span class="dv">3</span>) </a>
<a class="sourceLine" id="cb7-17" title="17"></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co"># running the weighted Price Sensitivity Meter analysis</span></a>
<a class="sourceLine" id="cb7-19" title="19">test_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">psm_analysis_weighted</span>(<span class="dt">toocheap =</span> <span class="st">&quot;tch&quot;</span>,</a>
<a class="sourceLine" id="cb7-20" title="20">                                <span class="dt">cheap =</span> <span class="st">&quot;ch&quot;</span>,</a>
<a class="sourceLine" id="cb7-21" title="21">                                <span class="dt">expensive =</span> <span class="st">&quot;ex&quot;</span>,</a>
<a class="sourceLine" id="cb7-22" title="22">                                <span class="dt">tooexpensive =</span> <span class="st">&quot;tex&quot;</span>,</a>
<a class="sourceLine" id="cb7-23" title="23">                                <span class="dt">design =</span> input_design_<span class="dv">3</span>,</a>
<a class="sourceLine" id="cb7-24" title="24">                                <span class="dt">pi_cheap =</span> <span class="st">&quot;pi_ch&quot;</span>,</a>
<a class="sourceLine" id="cb7-25" title="25">                                <span class="dt">pi_expensive =</span> <span class="st">&quot;pi_ex&quot;</span>,</a>
<a class="sourceLine" id="cb7-26" title="26">                                <span class="dt">pi_scale =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-27" title="27">                                <span class="dt">pi_calibrated =</span> <span class="kw">c</span>(<span class="fl">0.7</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb7-28" title="28"></a>
<a class="sourceLine" id="cb7-29" title="29"><span class="kw">summary</span>(test_<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb7-30" title="30"><span class="co">#&gt; Van Westendorp Price Sensitivity Meter Analysis</span></a>
<a class="sourceLine" id="cb7-31" title="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-32" title="32"><span class="co">#&gt; Accepted Price Range: 11.94 - 16.34 </span></a>
<a class="sourceLine" id="cb7-33" title="33"><span class="co">#&gt; Indifference Price Point: 14.36 </span></a>
<a class="sourceLine" id="cb7-34" title="34"><span class="co">#&gt; Optimal Price Point: 13.77 </span></a>
<a class="sourceLine" id="cb7-35" title="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-36" title="36"><span class="co">#&gt; Newton Miller Smith Extension</span></a>
<a class="sourceLine" id="cb7-37" title="37"><span class="co">#&gt; Price with Optimal Trial Rate: 17.5 </span></a>
<a class="sourceLine" id="cb7-38" title="38"><span class="co">#&gt; Price with Optimal Revenue: 17.67 </span></a>
<a class="sourceLine" id="cb7-39" title="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-40" title="40"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb7-41" title="41"><span class="co">#&gt; 226 cases with individual price preferences were analyzed (weighted data).</span></a>
<a class="sourceLine" id="cb7-42" title="42"><span class="co">#&gt; Total data set consists of 250 cases. Analysis was limited to cases with transitive price preferences.</span></a>
<a class="sourceLine" id="cb7-43" title="43"><span class="co">#&gt; (Removed: n = 24 / 10% of data)</span></a></code></pre></div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Lumley, T (2010) <em>Complex Surveys: A Guide to Analysis Using R</em><a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
